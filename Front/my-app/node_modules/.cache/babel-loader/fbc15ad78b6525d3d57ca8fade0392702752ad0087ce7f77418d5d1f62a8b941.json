{"ast":null,"code":"import { ApplicationCancelError, buildApplicationCancelTokenSource } from '@frontapp/ui-bridge';\nexport * from '@frontapp/ui-bridge';\nimport cuid from 'cuid';\nimport { Observable, fromEvent } from 'rxjs';\nimport { take, publish, filter, publishReplay, map } from 'rxjs/operators';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nvar WebViewMessageTypesEnum;\n(function (WebViewMessageTypesEnum) {\n  WebViewMessageTypesEnum[\"CONTEXT_UPDATE\"] = \"context_update\";\n  WebViewMessageTypesEnum[\"FUNCTION_CALL\"] = \"function_call\";\n  WebViewMessageTypesEnum[\"FUNCTION_CANCEL\"] = \"function_cancel\";\n  WebViewMessageTypesEnum[\"FUNCTION_RESULT\"] = \"function_result\";\n  WebViewMessageTypesEnum[\"FUNCTION_ERROR\"] = \"function_error\";\n})(WebViewMessageTypesEnum || (WebViewMessageTypesEnum = {}));\n/*\n * WebView to AppSDK.\n */\nvar webViewBridgeHandshake = '@frontapp/ui-sdk#WebViewBridge.handshake';\n/*\n * Type guards.\n */\nfunction isContextUpdateMessageWithPort(message) {\n  return message.type === WebViewMessageTypesEnum.CONTEXT_UPDATE;\n}\nfunction isFunctionResultMessage(message) {\n  return message.type === WebViewMessageTypesEnum.FUNCTION_RESULT || message.type === WebViewMessageTypesEnum.FUNCTION_ERROR;\n}\n\n/*\n * Bridge.\n */\nfunction buildWebViewBridge() {\n  /*\n   * Core observable.\n   */\n  var _this = this;\n  // Create an observable for any hostmessage without ever unsubscribing.\n  var messages = new Observable(function (next) {\n    return connectToParent().subscribe(next);\n  }).pipe(publish(), connectOnSubscribe());\n  var contextUpdates = messages.pipe(filter(isContextUpdateMessageWithPort), publishReplay(1), connectOnSubscribe());\n  /*\n   * Context function forwarders.\n   */\n  var proxyFunctionCall = function (port, callId, contextId, name, args) {\n    port.postMessage({\n      type: WebViewMessageTypesEnum.FUNCTION_CALL,\n      id: callId,\n      contextId: contextId,\n      name: name,\n      args: args\n    });\n    return messages.pipe(filter(isFunctionResultMessage), filter(function (m) {\n      return m.id === callId;\n    }), map(function (m) {\n      switch (m.type) {\n        case WebViewMessageTypesEnum.FUNCTION_RESULT:\n          return m.value;\n        case WebViewMessageTypesEnum.FUNCTION_ERROR:\n        default:\n          throw new Error(String(m.error));\n      }\n    }), take(1));\n  };\n  var proxyFunctionCancel = function (port, callId) {\n    port.postMessage({\n      type: WebViewMessageTypesEnum.FUNCTION_CANCEL,\n      id: callId\n    });\n  };\n  /*\n   * Context proxy.\n   */\n  var contextProxyUpdates = contextUpdates.pipe(map(function (_a) {\n    var port = _a.port,\n      context = _a.context;\n    return new Proxy(context, {\n      get: function (target, property) {\n        var propertyName = String(property);\n        var functionArity = target.functionArities[propertyName];\n        // If the property exists or it is not a function with arity, let the target handle it.\n        if (property in target || !Number.isInteger(functionArity)) return target[property];\n        // Otherwise, create the function.\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var callId = cuid();\n          // Extract the cancel token.\n          var cancelTokenIndex = functionArity - 1;\n          var cancelToken = args[cancelTokenIndex];\n          // Do not send the cancel token in the proxied arguments.\n          var argsToSend = args.slice(0, cancelTokenIndex);\n          return new Promise(function (resolve, reject) {\n            var subscription = proxyFunctionCall(port, callId, context.id, propertyName, argsToSend).subscribe({\n              next: resolve,\n              error: reject\n            });\n            if (cancelToken) cancelToken.promise.then(function () {\n              if (subscription.closed) return;\n              subscription.unsubscribe();\n              reject(new ApplicationCancelError());\n              proxyFunctionCancel(port, callId);\n            });\n          });\n        };\n      }\n    });\n  }));\n  var baseBridge = {\n    contextUpdates: contextProxyUpdates,\n    buildCancelTokenSource: buildApplicationCancelTokenSource,\n    isCancelError: function (error) {\n      return error instanceof ApplicationCancelError;\n    }\n  };\n  /*\n   * SDK proxy.\n   */\n  return new Proxy(baseBridge, {\n    get: function (target, property) {\n      // If the property exists on the target, return it.\n      if (property in target) return target[property];\n      // Otherwise, assume that it's an async function call.\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return new Promise(function (resolve, reject) {\n          contextProxyUpdates.pipe(take(1)).subscribe({\n            next: function (context) {\n              return __awaiter(_this, void 0, void 0, function () {\n                var contextValue, error, _a, error_1;\n                return __generator(this, function (_b) {\n                  switch (_b.label) {\n                    case 0:\n                      contextValue = context[property];\n                      if (contextValue === undefined) {\n                        error = String(property) + \" is not a valid function for context \" + context.type + \".\";\n                        reject(new ReferenceError(error));\n                        return [2 /*return*/];\n                      }\n\n                      _b.label = 1;\n                    case 1:\n                      _b.trys.push([1, 3,, 4]);\n                      _a = resolve;\n                      return [4 /*yield*/, contextValue.apply(void 0, args)];\n                    case 2:\n                      _a.apply(void 0, [_b.sent()]);\n                      return [3 /*break*/, 4];\n                    case 3:\n                      error_1 = _b.sent();\n                      reject(error_1);\n                      return [3 /*break*/, 4];\n                    case 4:\n                      return [2 /*return*/];\n                  }\n                });\n              });\n            },\n\n            error: reject\n          });\n        });\n      };\n    }\n  });\n}\n/*\n * Helpers.\n */\nfunction connectToParent() {\n  var parent = window.parent;\n  var _a = new MessageChannel(),\n    port1 = _a.port1,\n    port2 = _a.port2;\n  var messages = fromEvent(port1, 'message').pipe(map(function (e) {\n    return __assign(__assign({}, e.data), {\n      port: port1\n    });\n  }));\n  // Start the port and send the handshake.\n  port1.start();\n  parent.postMessage(webViewBridgeHandshake, '*', [port2]);\n  return messages;\n}\nfunction connectOnSubscribe() {\n  return function (source) {\n    if (!isConnectableObservable(source)) return source;\n    return new Observable(function (next) {\n      var subscription = source.subscribe(next);\n      source.connect();\n      return subscription;\n    });\n  };\n}\nfunction isConnectableObservable(source) {\n  return typeof source.connect === 'function';\n}\nvar Front = buildWebViewBridge();\nvar buildCancelTokenSource = Front.buildCancelTokenSource,\n  contextUpdates = Front.contextUpdates,\n  isCancelError = Front.isCancelError;\n// To support server side render frameworks (NextJS for example) they do not have access to a\n// window object during build time (or when they are doing any SSR work). We need to check\n// before trying to do the handshake that we have access to a window object, which is required\n// to do handshake / messages with the parent iframe.\nif (typeof window !== 'undefined')\n  // Subscribe to the context updates so we do a handshake immediately.\n  // Subscribing here makes sure we do a handshake the moment the file is loaded instead of\n  // waiting for the consuming plugin to subscribe to the contextUpdates observable.\n  contextUpdates.pipe(take(1)).subscribe();\n/** Delegate clicks on anchor elements targetting a new window to Front. */\nfunction delegateAnchorClicksToFront() {\n  // Traps are not needed in a non-embedded context.\n  if (window.parent === window.self) return;\n  // Capture clicks.\n  window.addEventListener('click', function (event) {\n    // No need to do anything if the click did not use the default button.\n    if (event.button !== 0) return;\n    // Find the targetted anchor element.\n    var target = event.target;\n    var anchorElement = target instanceof window.HTMLElement ? target.closest('a') : null;\n    // We can't do anything without an href\n    if (!anchorElement || !anchorElement.href) return;\n    // Don't do anything if the anchor is not opening a new window nor is a mailto link.\n    if (anchorElement.target !== '_blank' && !anchorElement.href.startsWith('mailto:')) return;\n    // Parse the href to support relative paths.\n    var url = new URL(anchorElement.href, window.location.href);\n    event.preventDefault();\n    Front.openUrl(url.href);\n  });\n}\nexport default Front;\nexport { buildCancelTokenSource, contextUpdates, delegateAnchorClicksToFront, isCancelError };","map":{"version":3,"names":["ApplicationCancelError","buildApplicationCancelTokenSource","cuid","Observable","fromEvent","take","publish","filter","publishReplay","map","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","WebViewMessageTypesEnum","webViewBridgeHandshake","isContextUpdateMessageWithPort","message","type","CONTEXT_UPDATE","isFunctionResultMessage","FUNCTION_RESULT","FUNCTION_ERROR","buildWebViewBridge","_this","messages","connectToParent","subscribe","pipe","connectOnSubscribe","contextUpdates","proxyFunctionCall","port","callId","contextId","name","args","postMessage","FUNCTION_CALL","id","m","Error","String","error","proxyFunctionCancel","FUNCTION_CANCEL","contextProxyUpdates","_a","context","Proxy","get","target","property","propertyName","functionArity","functionArities","Number","isInteger","_i","cancelTokenIndex","cancelToken","argsToSend","slice","subscription","promise","closed","unsubscribe","baseBridge","buildCancelTokenSource","isCancelError","contextValue","error_1","_b","undefined","ReferenceError","parent","window","MessageChannel","port1","port2","data","start","source","isConnectableObservable","connect","Front","delegateAnchorClicksToFront","self","addEventListener","event","button","anchorElement","HTMLElement","closest","href","startsWith","url","URL","location","preventDefault","openUrl"],"sources":["C:/Users/atjam/OneDrive/Documents/GitHub/frontslack/Front/my-app/node_modules/@frontapp/plugin-sdk/dist/index.es.js"],"sourcesContent":["import { ApplicationCancelError, buildApplicationCancelTokenSource } from '@frontapp/ui-bridge';\nexport * from '@frontapp/ui-bridge';\nimport cuid from 'cuid';\nimport { Observable, fromEvent } from 'rxjs';\nimport { take, publish, filter, publishReplay, map } from 'rxjs/operators';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar WebViewMessageTypesEnum;\n(function (WebViewMessageTypesEnum) {\n    WebViewMessageTypesEnum[\"CONTEXT_UPDATE\"] = \"context_update\";\n    WebViewMessageTypesEnum[\"FUNCTION_CALL\"] = \"function_call\";\n    WebViewMessageTypesEnum[\"FUNCTION_CANCEL\"] = \"function_cancel\";\n    WebViewMessageTypesEnum[\"FUNCTION_RESULT\"] = \"function_result\";\n    WebViewMessageTypesEnum[\"FUNCTION_ERROR\"] = \"function_error\";\n})(WebViewMessageTypesEnum || (WebViewMessageTypesEnum = {}));\n/*\n * WebView to AppSDK.\n */\nvar webViewBridgeHandshake = '@frontapp/ui-sdk#WebViewBridge.handshake';\n/*\n * Type guards.\n */\nfunction isContextUpdateMessageWithPort(message) {\n    return message.type === WebViewMessageTypesEnum.CONTEXT_UPDATE;\n}\nfunction isFunctionResultMessage(message) {\n    return (message.type === WebViewMessageTypesEnum.FUNCTION_RESULT ||\n        message.type === WebViewMessageTypesEnum.FUNCTION_ERROR);\n}\n\n/*\n * Bridge.\n */\nfunction buildWebViewBridge() {\n    /*\n     * Core observable.\n     */\n    var _this = this;\n    // Create an observable for any hostmessage without ever unsubscribing.\n    var messages = new Observable(function (next) { return connectToParent().subscribe(next); }).pipe(publish(), connectOnSubscribe());\n    var contextUpdates = messages.pipe(filter(isContextUpdateMessageWithPort), publishReplay(1), connectOnSubscribe());\n    /*\n     * Context function forwarders.\n     */\n    var proxyFunctionCall = function (port, callId, contextId, name, args) {\n        port.postMessage({\n            type: WebViewMessageTypesEnum.FUNCTION_CALL,\n            id: callId,\n            contextId: contextId,\n            name: name,\n            args: args\n        });\n        return messages.pipe(filter(isFunctionResultMessage), filter(function (m) { return m.id === callId; }), map(function (m) {\n            switch (m.type) {\n                case WebViewMessageTypesEnum.FUNCTION_RESULT:\n                    return m.value;\n                case WebViewMessageTypesEnum.FUNCTION_ERROR:\n                default:\n                    throw new Error(String(m.error));\n            }\n        }), take(1));\n    };\n    var proxyFunctionCancel = function (port, callId) {\n        port.postMessage({ type: WebViewMessageTypesEnum.FUNCTION_CANCEL, id: callId });\n    };\n    /*\n     * Context proxy.\n     */\n    var contextProxyUpdates = contextUpdates.pipe(map(function (_a) {\n        var port = _a.port, context = _a.context;\n        return new Proxy(context, {\n            get: function (target, property) {\n                var propertyName = String(property);\n                var functionArity = target.functionArities[propertyName];\n                // If the property exists or it is not a function with arity, let the target handle it.\n                if (property in target || !Number.isInteger(functionArity))\n                    return target[property];\n                // Otherwise, create the function.\n                return function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var callId = cuid();\n                    // Extract the cancel token.\n                    var cancelTokenIndex = functionArity - 1;\n                    var cancelToken = args[cancelTokenIndex];\n                    // Do not send the cancel token in the proxied arguments.\n                    var argsToSend = args.slice(0, cancelTokenIndex);\n                    return new Promise(function (resolve, reject) {\n                        var subscription = proxyFunctionCall(port, callId, context.id, propertyName, argsToSend).subscribe({\n                            next: resolve,\n                            error: reject\n                        });\n                        if (cancelToken)\n                            cancelToken.promise.then(function () {\n                                if (subscription.closed)\n                                    return;\n                                subscription.unsubscribe();\n                                reject(new ApplicationCancelError());\n                                proxyFunctionCancel(port, callId);\n                            });\n                    });\n                };\n            }\n        });\n    }));\n    var baseBridge = {\n        contextUpdates: contextProxyUpdates,\n        buildCancelTokenSource: buildApplicationCancelTokenSource,\n        isCancelError: function (error) { return error instanceof ApplicationCancelError; }\n    };\n    /*\n     * SDK proxy.\n     */\n    return new Proxy(baseBridge, {\n        get: function (target, property) {\n            // If the property exists on the target, return it.\n            if (property in target)\n                return target[property];\n            // Otherwise, assume that it's an async function call.\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return new Promise(function (resolve, reject) {\n                    contextProxyUpdates.pipe(take(1)).subscribe({\n                        next: function (context) { return __awaiter(_this, void 0, void 0, function () {\n                            var contextValue, error, _a, error_1;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        contextValue = context[property];\n                                        if (contextValue === undefined) {\n                                            error = String(property) + \" is not a valid function for context \" + context.type + \".\";\n                                            reject(new ReferenceError(error));\n                                            return [2 /*return*/];\n                                        }\n                                        _b.label = 1;\n                                    case 1:\n                                        _b.trys.push([1, 3, , 4]);\n                                        _a = resolve;\n                                        return [4 /*yield*/, contextValue.apply(void 0, args)];\n                                    case 2:\n                                        _a.apply(void 0, [_b.sent()]);\n                                        return [3 /*break*/, 4];\n                                    case 3:\n                                        error_1 = _b.sent();\n                                        reject(error_1);\n                                        return [3 /*break*/, 4];\n                                    case 4: return [2 /*return*/];\n                                }\n                            });\n                        }); },\n                        error: reject\n                    });\n                });\n            };\n        }\n    });\n}\n/*\n * Helpers.\n */\nfunction connectToParent() {\n    var parent = window.parent;\n    var _a = new MessageChannel(), port1 = _a.port1, port2 = _a.port2;\n    var messages = fromEvent(port1, 'message').pipe(map(function (e) {\n        return (__assign(__assign({}, e.data), { port: port1 }));\n    }));\n    // Start the port and send the handshake.\n    port1.start();\n    parent.postMessage(webViewBridgeHandshake, '*', [port2]);\n    return messages;\n}\nfunction connectOnSubscribe() {\n    return function (source) {\n        if (!isConnectableObservable(source))\n            return source;\n        return new Observable(function (next) {\n            var subscription = source.subscribe(next);\n            source.connect();\n            return subscription;\n        });\n    };\n}\nfunction isConnectableObservable(source) {\n    return typeof source.connect === 'function';\n}\nvar Front = buildWebViewBridge();\nvar buildCancelTokenSource = Front.buildCancelTokenSource, contextUpdates = Front.contextUpdates, isCancelError = Front.isCancelError;\n// To support server side render frameworks (NextJS for example) they do not have access to a\n// window object during build time (or when they are doing any SSR work). We need to check\n// before trying to do the handshake that we have access to a window object, which is required\n// to do handshake / messages with the parent iframe.\nif (typeof window !== 'undefined')\n    // Subscribe to the context updates so we do a handshake immediately.\n    // Subscribing here makes sure we do a handshake the moment the file is loaded instead of\n    // waiting for the consuming plugin to subscribe to the contextUpdates observable.\n    contextUpdates.pipe(take(1)).subscribe();\n/** Delegate clicks on anchor elements targetting a new window to Front. */\nfunction delegateAnchorClicksToFront() {\n    // Traps are not needed in a non-embedded context.\n    if (window.parent === window.self)\n        return;\n    // Capture clicks.\n    window.addEventListener('click', function (event) {\n        // No need to do anything if the click did not use the default button.\n        if (event.button !== 0)\n            return;\n        // Find the targetted anchor element.\n        var target = event.target;\n        var anchorElement = target instanceof window.HTMLElement ? target.closest('a') : null;\n        // We can't do anything without an href\n        if (!anchorElement || !anchorElement.href)\n            return;\n        // Don't do anything if the anchor is not opening a new window nor is a mailto link.\n        if (anchorElement.target !== '_blank' && !anchorElement.href.startsWith('mailto:'))\n            return;\n        // Parse the href to support relative paths.\n        var url = new URL(anchorElement.href, window.location.href);\n        event.preventDefault();\n        Front.openUrl(url.href);\n    });\n}\n\nexport default Front;\nexport { buildCancelTokenSource, contextUpdates, delegateAnchorClicksToFront, isCancelError };\n"],"mappings":"AAAA,SAASA,sBAAsB,EAAEC,iCAAiC,QAAQ,qBAAqB;AAC/F,cAAc,qBAAqB;AACnC,OAAOC,IAAI,MAAM,MAAM;AACvB,SAASC,UAAU,EAAEC,SAAS,QAAQ,MAAM;AAC5C,SAASC,IAAI,EAAEC,OAAO,EAAEC,MAAM,EAAEC,aAAa,EAAEC,GAAG,QAAQ,gBAAgB;;AAE1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,QAAQ,GAAG,SAAAA,CAAA,EAAW;EACtBA,QAAQ,GAAGC,MAAM,CAACC,MAAM,IAAI,SAASF,QAAQA,CAACG,CAAC,EAAE;IAC7C,KAAK,IAAIC,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEH,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;MACjDD,CAAC,GAAGG,SAAS,CAACF,CAAC,CAAC;MAChB,KAAK,IAAII,CAAC,IAAIL,CAAC,EAAE,IAAIH,MAAM,CAACS,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAChF;IACA,OAAON,CAAC;EACZ,CAAC;EACD,OAAOH,QAAQ,CAACa,KAAK,CAAC,IAAI,EAAEN,SAAS,CAAC;AAC1C,CAAC;AAED,SAASO,SAASA,CAACC,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EAClD,OAAO,KAAKD,CAAC,KAAKA,CAAC,GAAGE,OAAO,CAAC,EAAE,UAAUC,OAAO,EAAEC,MAAM,EAAE;IACvD,SAASC,SAASA,CAACC,KAAK,EAAE;MAAE,IAAI;QAAEC,IAAI,CAACN,SAAS,CAACO,IAAI,CAACF,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOG,CAAC,EAAE;QAAEL,MAAM,CAACK,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASC,QAAQA,CAACJ,KAAK,EAAE;MAAE,IAAI;QAAEC,IAAI,CAACN,SAAS,CAAC,OAAO,CAAC,CAACK,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOG,CAAC,EAAE;QAAEL,MAAM,CAACK,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASF,IAAIA,CAACI,MAAM,EAAE;MAAEA,MAAM,CAACC,IAAI,GAAGT,OAAO,CAACQ,MAAM,CAACL,KAAK,CAAC,GAAG,IAAIN,CAAC,CAAC,UAAUG,OAAO,EAAE;QAAEA,OAAO,CAACQ,MAAM,CAACL,KAAK,CAAC;MAAE,CAAC,CAAC,CAACO,IAAI,CAACR,SAAS,EAAEK,QAAQ,CAAC;IAAE;IAC9IH,IAAI,CAAC,CAACN,SAAS,GAAGA,SAAS,CAACL,KAAK,CAACE,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAES,IAAI,EAAE,CAAC;EACzE,CAAC,CAAC;AACN;AAEA,SAASM,WAAWA,CAAChB,OAAO,EAAEiB,IAAI,EAAE;EAChC,IAAIC,CAAC,GAAG;MAAEC,KAAK,EAAE,CAAC;MAAEC,IAAI,EAAE,SAAAA,CAAA,EAAW;QAAE,IAAIhC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAMA,CAAC,CAAC,CAAC,CAAC;QAAE,OAAOA,CAAC,CAAC,CAAC,CAAC;MAAE,CAAC;MAAEiC,IAAI,EAAE,EAAE;MAAEC,GAAG,EAAE;IAAG,CAAC;IAAEC,CAAC;IAAEC,CAAC;IAAEpC,CAAC;IAAEqC,CAAC;EAChH,OAAOA,CAAC,GAAG;IAAEf,IAAI,EAAEgB,IAAI,CAAC,CAAC,CAAC;IAAE,OAAO,EAAEA,IAAI,CAAC,CAAC,CAAC;IAAE,QAAQ,EAAEA,IAAI,CAAC,CAAC;EAAE,CAAC,EAAE,OAAOC,MAAM,KAAK,UAAU,KAAKF,CAAC,CAACE,MAAM,CAACC,QAAQ,CAAC,GAAG,YAAW;IAAE,OAAO,IAAI;EAAE,CAAC,CAAC,EAAEH,CAAC;EACxJ,SAASC,IAAIA,CAACnC,CAAC,EAAE;IAAE,OAAO,UAAUsC,CAAC,EAAE;MAAE,OAAOpB,IAAI,CAAC,CAAClB,CAAC,EAAEsC,CAAC,CAAC,CAAC;IAAE,CAAC;EAAE;EACjE,SAASpB,IAAIA,CAACqB,EAAE,EAAE;IACd,IAAIP,CAAC,EAAE,MAAM,IAAIQ,SAAS,CAAC,iCAAiC,CAAC;IAC7D,OAAOb,CAAC,EAAE,IAAI;MACV,IAAIK,CAAC,GAAG,CAAC,EAAEC,CAAC,KAAKpC,CAAC,GAAG0C,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAGN,CAAC,CAAC,QAAQ,CAAC,GAAGM,EAAE,CAAC,CAAC,CAAC,GAAGN,CAAC,CAAC,OAAO,CAAC,KAAK,CAACpC,CAAC,GAAGoC,CAAC,CAAC,QAAQ,CAAC,KAAKpC,CAAC,CAACS,IAAI,CAAC2B,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGA,CAAC,CAACd,IAAI,CAAC,IAAI,CAAC,CAACtB,CAAC,GAAGA,CAAC,CAACS,IAAI,CAAC2B,CAAC,EAAEM,EAAE,CAAC,CAAC,CAAC,CAAC,EAAEhB,IAAI,EAAE,OAAO1B,CAAC;MAC5J,IAAIoC,CAAC,GAAG,CAAC,EAAEpC,CAAC,EAAE0C,EAAE,GAAG,CAACA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE1C,CAAC,CAACoB,KAAK,CAAC;MACvC,QAAQsB,EAAE,CAAC,CAAC,CAAC;QACT,KAAK,CAAC;QAAE,KAAK,CAAC;UAAE1C,CAAC,GAAG0C,EAAE;UAAE;QACxB,KAAK,CAAC;UAAEZ,CAAC,CAACC,KAAK,EAAE;UAAE,OAAO;YAAEX,KAAK,EAAEsB,EAAE,CAAC,CAAC,CAAC;YAAEhB,IAAI,EAAE;UAAM,CAAC;QACvD,KAAK,CAAC;UAAEI,CAAC,CAACC,KAAK,EAAE;UAAEK,CAAC,GAAGM,EAAE,CAAC,CAAC,CAAC;UAAEA,EAAE,GAAG,CAAC,CAAC,CAAC;UAAE;QACxC,KAAK,CAAC;UAAEA,EAAE,GAAGZ,CAAC,CAACI,GAAG,CAACU,GAAG,EAAE;UAAEd,CAAC,CAACG,IAAI,CAACW,GAAG,EAAE;UAAE;QACxC;UACI,IAAI,EAAE5C,CAAC,GAAG8B,CAAC,CAACG,IAAI,EAAEjC,CAAC,GAAGA,CAAC,CAACK,MAAM,GAAG,CAAC,IAAIL,CAAC,CAACA,CAAC,CAACK,MAAM,GAAG,CAAC,CAAC,CAAC,KAAKqC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAIA,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;YAAEZ,CAAC,GAAG,CAAC;YAAE;UAAU;UAC3G,IAAIY,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC1C,CAAC,IAAK0C,EAAE,CAAC,CAAC,CAAC,GAAG1C,CAAC,CAAC,CAAC,CAAC,IAAI0C,EAAE,CAAC,CAAC,CAAC,GAAG1C,CAAC,CAAC,CAAC,CAAE,CAAC,EAAE;YAAE8B,CAAC,CAACC,KAAK,GAAGW,EAAE,CAAC,CAAC,CAAC;YAAE;UAAO;UACrF,IAAIA,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAIZ,CAAC,CAACC,KAAK,GAAG/B,CAAC,CAAC,CAAC,CAAC,EAAE;YAAE8B,CAAC,CAACC,KAAK,GAAG/B,CAAC,CAAC,CAAC,CAAC;YAAEA,CAAC,GAAG0C,EAAE;YAAE;UAAO;UACpE,IAAI1C,CAAC,IAAI8B,CAAC,CAACC,KAAK,GAAG/B,CAAC,CAAC,CAAC,CAAC,EAAE;YAAE8B,CAAC,CAACC,KAAK,GAAG/B,CAAC,CAAC,CAAC,CAAC;YAAE8B,CAAC,CAACI,GAAG,CAACW,IAAI,CAACH,EAAE,CAAC;YAAE;UAAO;UAClE,IAAI1C,CAAC,CAAC,CAAC,CAAC,EAAE8B,CAAC,CAACI,GAAG,CAACU,GAAG,EAAE;UACrBd,CAAC,CAACG,IAAI,CAACW,GAAG,EAAE;UAAE;MAAS;MAE/BF,EAAE,GAAGb,IAAI,CAACpB,IAAI,CAACG,OAAO,EAAEkB,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOP,CAAC,EAAE;MAAEmB,EAAE,GAAG,CAAC,CAAC,EAAEnB,CAAC,CAAC;MAAEa,CAAC,GAAG,CAAC;IAAE,CAAC,SAAS;MAAED,CAAC,GAAGnC,CAAC,GAAG,CAAC;IAAE;IACzD,IAAI0C,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAMA,EAAE,CAAC,CAAC,CAAC;IAAE,OAAO;MAAEtB,KAAK,EAAEsB,EAAE,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;MAAEhB,IAAI,EAAE;IAAK,CAAC;EACpF;AACJ;AAEA,IAAIoB,uBAAuB;AAC3B,CAAC,UAAUA,uBAAuB,EAAE;EAChCA,uBAAuB,CAAC,gBAAgB,CAAC,GAAG,gBAAgB;EAC5DA,uBAAuB,CAAC,eAAe,CAAC,GAAG,eAAe;EAC1DA,uBAAuB,CAAC,iBAAiB,CAAC,GAAG,iBAAiB;EAC9DA,uBAAuB,CAAC,iBAAiB,CAAC,GAAG,iBAAiB;EAC9DA,uBAAuB,CAAC,gBAAgB,CAAC,GAAG,gBAAgB;AAChE,CAAC,EAAEA,uBAAuB,KAAKA,uBAAuB,GAAG,CAAC,CAAC,CAAC,CAAC;AAC7D;AACA;AACA;AACA,IAAIC,sBAAsB,GAAG,0CAA0C;AACvE;AACA;AACA;AACA,SAASC,8BAA8BA,CAACC,OAAO,EAAE;EAC7C,OAAOA,OAAO,CAACC,IAAI,KAAKJ,uBAAuB,CAACK,cAAc;AAClE;AACA,SAASC,uBAAuBA,CAACH,OAAO,EAAE;EACtC,OAAQA,OAAO,CAACC,IAAI,KAAKJ,uBAAuB,CAACO,eAAe,IAC5DJ,OAAO,CAACC,IAAI,KAAKJ,uBAAuB,CAACQ,cAAc;AAC/D;;AAEA;AACA;AACA;AACA,SAASC,kBAAkBA,CAAA,EAAG;EAC1B;AACJ;AACA;EACI,IAAIC,KAAK,GAAG,IAAI;EAChB;EACA,IAAIC,QAAQ,GAAG,IAAInE,UAAU,CAAC,UAAUgC,IAAI,EAAE;IAAE,OAAOoC,eAAe,EAAE,CAACC,SAAS,CAACrC,IAAI,CAAC;EAAE,CAAC,CAAC,CAACsC,IAAI,CAACnE,OAAO,EAAE,EAAEoE,kBAAkB,EAAE,CAAC;EAClI,IAAIC,cAAc,GAAGL,QAAQ,CAACG,IAAI,CAAClE,MAAM,CAACsD,8BAA8B,CAAC,EAAErD,aAAa,CAAC,CAAC,CAAC,EAAEkE,kBAAkB,EAAE,CAAC;EAClH;AACJ;AACA;EACI,IAAIE,iBAAiB,GAAG,SAAAA,CAAUC,IAAI,EAAEC,MAAM,EAAEC,SAAS,EAAEC,IAAI,EAAEC,IAAI,EAAE;IACnEJ,IAAI,CAACK,WAAW,CAAC;MACbnB,IAAI,EAAEJ,uBAAuB,CAACwB,aAAa;MAC3CC,EAAE,EAAEN,MAAM;MACVC,SAAS,EAAEA,SAAS;MACpBC,IAAI,EAAEA,IAAI;MACVC,IAAI,EAAEA;IACV,CAAC,CAAC;IACF,OAAOX,QAAQ,CAACG,IAAI,CAAClE,MAAM,CAAC0D,uBAAuB,CAAC,EAAE1D,MAAM,CAAC,UAAU8E,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACD,EAAE,KAAKN,MAAM;IAAE,CAAC,CAAC,EAAErE,GAAG,CAAC,UAAU4E,CAAC,EAAE;MACrH,QAAQA,CAAC,CAACtB,IAAI;QACV,KAAKJ,uBAAuB,CAACO,eAAe;UACxC,OAAOmB,CAAC,CAACpD,KAAK;QAClB,KAAK0B,uBAAuB,CAACQ,cAAc;QAC3C;UACI,MAAM,IAAImB,KAAK,CAACC,MAAM,CAACF,CAAC,CAACG,KAAK,CAAC,CAAC;MAAC;IAE7C,CAAC,CAAC,EAAEnF,IAAI,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC;EACD,IAAIoF,mBAAmB,GAAG,SAAAA,CAAUZ,IAAI,EAAEC,MAAM,EAAE;IAC9CD,IAAI,CAACK,WAAW,CAAC;MAAEnB,IAAI,EAAEJ,uBAAuB,CAAC+B,eAAe;MAAEN,EAAE,EAAEN;IAAO,CAAC,CAAC;EACnF,CAAC;EACD;AACJ;AACA;EACI,IAAIa,mBAAmB,GAAGhB,cAAc,CAACF,IAAI,CAAChE,GAAG,CAAC,UAAUmF,EAAE,EAAE;IAC5D,IAAIf,IAAI,GAAGe,EAAE,CAACf,IAAI;MAAEgB,OAAO,GAAGD,EAAE,CAACC,OAAO;IACxC,OAAO,IAAIC,KAAK,CAACD,OAAO,EAAE;MACtBE,GAAG,EAAE,SAAAA,CAAUC,MAAM,EAAEC,QAAQ,EAAE;QAC7B,IAAIC,YAAY,GAAGX,MAAM,CAACU,QAAQ,CAAC;QACnC,IAAIE,aAAa,GAAGH,MAAM,CAACI,eAAe,CAACF,YAAY,CAAC;QACxD;QACA,IAAID,QAAQ,IAAID,MAAM,IAAI,CAACK,MAAM,CAACC,SAAS,CAACH,aAAa,CAAC,EACtD,OAAOH,MAAM,CAACC,QAAQ,CAAC;QAC3B;QACA,OAAO,YAAY;UACf,IAAIhB,IAAI,GAAG,EAAE;UACb,KAAK,IAAIsB,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGtF,SAAS,CAACC,MAAM,EAAEqF,EAAE,EAAE,EAAE;YAC1CtB,IAAI,CAACsB,EAAE,CAAC,GAAGtF,SAAS,CAACsF,EAAE,CAAC;UAC5B;UACA,IAAIzB,MAAM,GAAG5E,IAAI,EAAE;UACnB;UACA,IAAIsG,gBAAgB,GAAGL,aAAa,GAAG,CAAC;UACxC,IAAIM,WAAW,GAAGxB,IAAI,CAACuB,gBAAgB,CAAC;UACxC;UACA,IAAIE,UAAU,GAAGzB,IAAI,CAAC0B,KAAK,CAAC,CAAC,EAAEH,gBAAgB,CAAC;UAChD,OAAO,IAAI3E,OAAO,CAAC,UAAUC,OAAO,EAAEC,MAAM,EAAE;YAC1C,IAAI6E,YAAY,GAAGhC,iBAAiB,CAACC,IAAI,EAAEC,MAAM,EAAEe,OAAO,CAACT,EAAE,EAAEc,YAAY,EAAEQ,UAAU,CAAC,CAAClC,SAAS,CAAC;cAC/FrC,IAAI,EAAEL,OAAO;cACb0D,KAAK,EAAEzD;YACX,CAAC,CAAC;YACF,IAAI0E,WAAW,EACXA,WAAW,CAACI,OAAO,CAACrE,IAAI,CAAC,YAAY;cACjC,IAAIoE,YAAY,CAACE,MAAM,EACnB;cACJF,YAAY,CAACG,WAAW,EAAE;cAC1BhF,MAAM,CAAC,IAAI/B,sBAAsB,EAAE,CAAC;cACpCyF,mBAAmB,CAACZ,IAAI,EAAEC,MAAM,CAAC;YACrC,CAAC,CAAC;UACV,CAAC,CAAC;QACN,CAAC;MACL;IACJ,CAAC,CAAC;EACN,CAAC,CAAC,CAAC;EACH,IAAIkC,UAAU,GAAG;IACbrC,cAAc,EAAEgB,mBAAmB;IACnCsB,sBAAsB,EAAEhH,iCAAiC;IACzDiH,aAAa,EAAE,SAAAA,CAAU1B,KAAK,EAAE;MAAE,OAAOA,KAAK,YAAYxF,sBAAsB;IAAE;EACtF,CAAC;EACD;AACJ;AACA;EACI,OAAO,IAAI8F,KAAK,CAACkB,UAAU,EAAE;IACzBjB,GAAG,EAAE,SAAAA,CAAUC,MAAM,EAAEC,QAAQ,EAAE;MAC7B;MACA,IAAIA,QAAQ,IAAID,MAAM,EAClB,OAAOA,MAAM,CAACC,QAAQ,CAAC;MAC3B;MACA,OAAO,YAAY;QACf,IAAIhB,IAAI,GAAG,EAAE;QACb,KAAK,IAAIsB,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGtF,SAAS,CAACC,MAAM,EAAEqF,EAAE,EAAE,EAAE;UAC1CtB,IAAI,CAACsB,EAAE,CAAC,GAAGtF,SAAS,CAACsF,EAAE,CAAC;QAC5B;QACA,OAAO,IAAI1E,OAAO,CAAC,UAAUC,OAAO,EAAEC,MAAM,EAAE;UAC1C4D,mBAAmB,CAAClB,IAAI,CAACpE,IAAI,CAAC,CAAC,CAAC,CAAC,CAACmE,SAAS,CAAC;YACxCrC,IAAI,EAAE,SAAAA,CAAU0D,OAAO,EAAE;cAAE,OAAOrE,SAAS,CAAC6C,KAAK,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,YAAY;gBAC3E,IAAI8C,YAAY,EAAE3B,KAAK,EAAEI,EAAE,EAAEwB,OAAO;gBACpC,OAAO3E,WAAW,CAAC,IAAI,EAAE,UAAU4E,EAAE,EAAE;kBACnC,QAAQA,EAAE,CAACzE,KAAK;oBACZ,KAAK,CAAC;sBACFuE,YAAY,GAAGtB,OAAO,CAACI,QAAQ,CAAC;sBAChC,IAAIkB,YAAY,KAAKG,SAAS,EAAE;wBAC5B9B,KAAK,GAAGD,MAAM,CAACU,QAAQ,CAAC,GAAG,uCAAuC,GAAGJ,OAAO,CAAC9B,IAAI,GAAG,GAAG;wBACvFhC,MAAM,CAAC,IAAIwF,cAAc,CAAC/B,KAAK,CAAC,CAAC;wBACjC,OAAO,CAAC,CAAC,CAAC,WAAW;sBACzB;;sBACA6B,EAAE,CAACzE,KAAK,GAAG,CAAC;oBAChB,KAAK,CAAC;sBACFyE,EAAE,CAACvE,IAAI,CAACY,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,GAAI,CAAC,CAAC,CAAC;sBACzBkC,EAAE,GAAG9D,OAAO;sBACZ,OAAO,CAAC,CAAC,CAAC,WAAWqF,YAAY,CAAC5F,KAAK,CAAC,KAAK,CAAC,EAAE0D,IAAI,CAAC,CAAC;oBAC1D,KAAK,CAAC;sBACFW,EAAE,CAACrE,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC8F,EAAE,CAACxE,IAAI,EAAE,CAAC,CAAC;sBAC7B,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;oBAC3B,KAAK,CAAC;sBACFuE,OAAO,GAAGC,EAAE,CAACxE,IAAI,EAAE;sBACnBd,MAAM,CAACqF,OAAO,CAAC;sBACf,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;oBAC3B,KAAK,CAAC;sBAAE,OAAO,CAAC,CAAC,CAAC,WAAW;kBAAC;gBAEtC,CAAC,CAAC;cACN,CAAC,CAAC;YAAE,CAAC;;YACL5B,KAAK,EAAEzD;UACX,CAAC,CAAC;QACN,CAAC,CAAC;MACN,CAAC;IACL;EACJ,CAAC,CAAC;AACN;AACA;AACA;AACA;AACA,SAASwC,eAAeA,CAAA,EAAG;EACvB,IAAIiD,MAAM,GAAGC,MAAM,CAACD,MAAM;EAC1B,IAAI5B,EAAE,GAAG,IAAI8B,cAAc,EAAE;IAAEC,KAAK,GAAG/B,EAAE,CAAC+B,KAAK;IAAEC,KAAK,GAAGhC,EAAE,CAACgC,KAAK;EACjE,IAAItD,QAAQ,GAAGlE,SAAS,CAACuH,KAAK,EAAE,SAAS,CAAC,CAAClD,IAAI,CAAChE,GAAG,CAAC,UAAU2B,CAAC,EAAE;IAC7D,OAAQ1B,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE0B,CAAC,CAACyF,IAAI,CAAC,EAAE;MAAEhD,IAAI,EAAE8C;IAAM,CAAC,CAAC;EAC3D,CAAC,CAAC,CAAC;EACH;EACAA,KAAK,CAACG,KAAK,EAAE;EACbN,MAAM,CAACtC,WAAW,CAACtB,sBAAsB,EAAE,GAAG,EAAE,CAACgE,KAAK,CAAC,CAAC;EACxD,OAAOtD,QAAQ;AACnB;AACA,SAASI,kBAAkBA,CAAA,EAAG;EAC1B,OAAO,UAAUqD,MAAM,EAAE;IACrB,IAAI,CAACC,uBAAuB,CAACD,MAAM,CAAC,EAChC,OAAOA,MAAM;IACjB,OAAO,IAAI5H,UAAU,CAAC,UAAUgC,IAAI,EAAE;MAClC,IAAIyE,YAAY,GAAGmB,MAAM,CAACvD,SAAS,CAACrC,IAAI,CAAC;MACzC4F,MAAM,CAACE,OAAO,EAAE;MAChB,OAAOrB,YAAY;IACvB,CAAC,CAAC;EACN,CAAC;AACL;AACA,SAASoB,uBAAuBA,CAACD,MAAM,EAAE;EACrC,OAAO,OAAOA,MAAM,CAACE,OAAO,KAAK,UAAU;AAC/C;AACA,IAAIC,KAAK,GAAG9D,kBAAkB,EAAE;AAChC,IAAI6C,sBAAsB,GAAGiB,KAAK,CAACjB,sBAAsB;EAAEtC,cAAc,GAAGuD,KAAK,CAACvD,cAAc;EAAEuC,aAAa,GAAGgB,KAAK,CAAChB,aAAa;AACrI;AACA;AACA;AACA;AACA,IAAI,OAAOO,MAAM,KAAK,WAAW;EAC7B;EACA;EACA;EACA9C,cAAc,CAACF,IAAI,CAACpE,IAAI,CAAC,CAAC,CAAC,CAAC,CAACmE,SAAS,EAAE;AAC5C;AACA,SAAS2D,2BAA2BA,CAAA,EAAG;EACnC;EACA,IAAIV,MAAM,CAACD,MAAM,KAAKC,MAAM,CAACW,IAAI,EAC7B;EACJ;EACAX,MAAM,CAACY,gBAAgB,CAAC,OAAO,EAAE,UAAUC,KAAK,EAAE;IAC9C;IACA,IAAIA,KAAK,CAACC,MAAM,KAAK,CAAC,EAClB;IACJ;IACA,IAAIvC,MAAM,GAAGsC,KAAK,CAACtC,MAAM;IACzB,IAAIwC,aAAa,GAAGxC,MAAM,YAAYyB,MAAM,CAACgB,WAAW,GAAGzC,MAAM,CAAC0C,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI;IACrF;IACA,IAAI,CAACF,aAAa,IAAI,CAACA,aAAa,CAACG,IAAI,EACrC;IACJ;IACA,IAAIH,aAAa,CAACxC,MAAM,KAAK,QAAQ,IAAI,CAACwC,aAAa,CAACG,IAAI,CAACC,UAAU,CAAC,SAAS,CAAC,EAC9E;IACJ;IACA,IAAIC,GAAG,GAAG,IAAIC,GAAG,CAACN,aAAa,CAACG,IAAI,EAAElB,MAAM,CAACsB,QAAQ,CAACJ,IAAI,CAAC;IAC3DL,KAAK,CAACU,cAAc,EAAE;IACtBd,KAAK,CAACe,OAAO,CAACJ,GAAG,CAACF,IAAI,CAAC;EAC3B,CAAC,CAAC;AACN;AAEA,eAAeT,KAAK;AACpB,SAASjB,sBAAsB,EAAEtC,cAAc,EAAEwD,2BAA2B,EAAEjB,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}